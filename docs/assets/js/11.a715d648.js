(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{487:function(s,t){s.exports="data:image/png;base64,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"},532:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"私有仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#私有仓库"}},[s._v("#")]),s._v(" 私有仓库")]),s._v(" "),e("blockquote",[e("p",[s._v("像Docker Hub这样的公共库对于公司使用来说可能有很多的不安全因素，所有这里记录说明 "),e("code",[s._v("docker-registry")]),s._v(" 私有仓库的搭建")])]),s._v(" "),e("h3",{attrs:{id:"_1、获取-docker-registry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、获取-docker-registry"}},[s._v("#")]),s._v(" 1、获取 docker-registry")]),s._v(" "),e("p",[s._v("获取官方"),e("code",[s._v("registry")]),s._v("镜像")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker pull registry\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2、配置docker-registry的地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、配置docker-registry的地址"}},[s._v("#")]),s._v(" 2、配置docker-registry的地址")]),s._v(" "),e("p",[s._v("如果要让内网地址下的其它主机能够访问私有仓库，需要为docker-registry配置内网地址，同时取消在"),e("code",[s._v("https")]),s._v("的显示，因为，docker默认不允许非"),e("code",[s._v("HTTPS")]),s._v(" 方式推送镜像。")]),s._v(" "),e("p",[s._v("在 "),e("code",[s._v("/etc/docker/daemon.json")]),s._v(" 文件中写入以下内容（如果文件不存在，创建文件）")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirror"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://hub-mirror.c.163.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://mirror.baidubce.com"')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"insecure-registries"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.199.100:5000"')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("blockquote",[e("p",[s._v("注意：该文件必须符合 "),e("code",[s._v("json")]),s._v(" 规范，负责Docker无法启动")])]),s._v(" "),e("h3",{attrs:{id:"_3、重启docker服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、重启docker服务"}},[s._v("#")]),s._v(" 3、重启docker服务")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ systemctl daemon-reload\n$ systemctl restart docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"_4、通过docker-compse启动registry"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4、通过docker-compse启动registry"}},[s._v("#")]),s._v(" 4、通过docker-compse启动registry")]),s._v(" "),e("p",[s._v("创建"),e("code",[s._v("registry-compose.yml")]),s._v("文件，写入以下内容")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("registry")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always \n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" registry"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("latest\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5000:5000"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" registry"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/var/lib/registry\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("registry-data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建registry的数据卷")]),s._v("\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[s._v("启动registry")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker-compose -f registry-compose.yml up -d\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看启动的镜像容器")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker-compose -f registry-compose.yml "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:a(487),alt:"image-20200911110108860"}})]),s._v(" "),e("h3",{attrs:{id:"_5、在私有仓库上传、搜索、下载镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5、在私有仓库上传、搜索、下载镜像"}},[s._v("#")]),s._v(" 5、在私有仓库上传、搜索、下载镜像")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("通过"),e("code",[s._v("docker tag")]),s._v("来标记镜像。")])]),s._v(" "),e("li",[e("p",[s._v("格式为 "),e("code",[s._v("docker tag IMAGE[:TAG] [REGISTRY_HOST[:REGISTRY_PORT]/]REPOSITORY[:TAG]")]),s._v("。")])]),s._v(" "),e("li",[e("p",[s._v("通过 "),e("code",[s._v("docker push")]),s._v(" 推送上传标记的镜像到私有仓库。")])])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过docker tag标记镜像")]),s._v("\n$ docker tag nacos/nacos-server:latest "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".199.100:5000/nacos/nacos-server:latest \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过docker push 上传标记的镜像")]),s._v("\n$ docker push "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".199.100:5000/nacos/nacos-server:latest \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("用 "),e("code",[s._v("curl")]),s._v(" 查看仓库中的镜像 格式为 "),e("code",[s._v("curl <仓库地址>/v2/_catalog")])])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".199.100:5000/v2/_catalog\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"repositories"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nacos/nacos-server"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("查询镜像的tag（版本）格式为 "),e("code",[s._v("curl <仓库地址>/v2/<镜像名>/tags/list")])])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".199.100:5000/v2/nacos/nacos-server/tags/list\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nacos/nacos-server"')]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tags"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ol",{attrs:{start:"6"}},[e("li",[s._v("下载镜像")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker pull "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".199.100:5000/nacos/nacos-server:latest \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"7"}},[e("li",[s._v("删除镜像API")])]),s._v(" "),e("p",[s._v("首先获取镜像的"),e("code",[s._v("digest_hash")]),s._v(" 格式为 "),e("code",[s._v('curl <仓库地址>/v2/<镜像名>/manifests/<tag> \\ --header "Accept: application/vnd.docker.distribution.manifest.v2+json"')])]),s._v(" "),e("p",[s._v("然后通过删除镜像API 格式为 "),e("code",[s._v('curl -I -X DELETE "<仓库地址>/v2/<镜像名>/manifests/<镜像digest_hash>"')]),s._v(" 执行删除操作")])])}),[],!1,null,null,null);t.default=n.exports}}]);